<<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Institution Vault | Central Archive</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6200ee;
            --secondary: #263238;
            --bg: #f8f9fa;
            --white: #ffffff;
            --accent: #03dac6;
        }

        body { font-family: 'Poppins', sans-serif; margin: 0; background: var(--bg); color: var(--secondary); display: flex; flex-direction: column; height: 100vh; overflow: hidden; }

        header { background: var(--white); padding: 20px; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid #eee; }

        /* Notification Box (Institutional Standard) */
        #notification-bar {
            position: fixed; top: -100px; left: 50%; transform: translateX(-50%);
            width: 90%; max-width: 400px; padding: 15px; border-radius: 12px;
            color: white; text-align: center; transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); z-index: 2000; font-weight: 600;
        }
        .bg-green { background: #00c853 !important; top: 20px !important; }
        .bg-red { background: #ff5252 !important; top: 20px !important; }

        /* Search Section */
        .search-area { padding: 15px 20px; background: var(--white); border-bottom: 1px solid #f0f0f0; }
        #vault-search {
            width: 100%; padding: 12px 15px; border: 1.5px solid #eee; border-radius: 12px;
            background: #f9f9f9; font-size: 14px; outline: none; box-sizing: border-box;
        }

        /* Dynamic Section Tabs */
        .section-header { padding: 15px 20px 5px; font-size: 11px; font-weight: 800; color: #999; text-transform: uppercase; letter-spacing: 1px; }
        .filter-scroll { display: flex; overflow-x: auto; padding: 10px 20px; gap: 10px; scrollbar-width: none; }
        .filter-scroll::-webkit-scrollbar { display: none; }
        .chip {
            white-space: nowrap; padding: 10px 18px; border-radius: 12px; background: #fff;
            font-size: 12px; font-weight: 700; color: #666; border: 1px solid #ddd; cursor: pointer; transition: 0.2s;
        }
        .chip.active { background: var(--primary); color: white; border-color: var(--primary); box-shadow: 0 4px 10px rgba(98,0,238,0.2); }

        /* Document Section List */
        .vault-container { flex: 1; overflow-y: auto; padding: 15px 20px; }

        .section-btn {
            background: var(--white); border-radius: 18px; padding: 18px; margin-bottom: 12px;
            display: flex; align-items: center; gap: 15px; border: 1px solid #efefef;
            cursor: pointer; transition: 0.2s; box-shadow: 0 2px 5px rgba(0,0,0,0.02);
        }
        .section-btn:active { transform: scale(0.98); background: #fafafa; }

        .icon-box {
            width: 48px; height: 48px; border-radius: 12px; display: flex;
            align-items: center; justify-content: center; font-size: 20px;
        }
        .bg-vouchers { background: #fff3e0; color: #ef6c00; }
        .bg-exams { background: #e8f5e9; color: #2e7d32; }
        .bg-scans { background: #e3f2fd; color: #1565c0; }
        .bg-gen { background: #f3e5f5; color: #7b1fa2; }

        .btn-info { flex: 1; }
        .btn-title { font-weight: 700; font-size: 15px; color: var(--secondary); display: block; }
        .btn-count { font-size: 11px; color: #aaa; font-weight: 600; }

        .chevron { color: #ccc; font-size: 18px; }
    </style>
</head>
<body>

<div id="notification-bar"></div>

<header>
    <div onclick="history.back()" style="font-size:24px; cursor:pointer;">‚úï</div>
    <span style="font-weight: 800; font-size: 15px;">INSTITUTION VAULT</span>
    <div style="width: 24px;"></div>
</header>

<div class="search-area">
    <input type="text" id="vault-search" placeholder="Search sections or documents..." onkeyup="filterSections()">
</div>

<div class="section-header">Last Accessed</div>
<div class="filter-scroll" id="dynamic-chips">
</div>

<div class="vault-container" id="sections-list">
</div>

<script>
    // üèõÔ∏è Simulation of Database Fetch
    // In a real app, 'sections' would come from your DB query:
    // SELECT type, COUNT(*) as total FROM vault GROUP BY type
    const institutionSections = [
        { id: 'vouchers', name: 'Fee Vouchers', icon: 'üé´', color: 'bg-vouchers', count: '124 files' },
        { id: 'scans', name: 'Scanned Documents', icon: 'üì∑', color: 'bg-scans', count: '45 files' },
        { id: 'exams', name: 'Exam Papers', icon: 'üìù', color: 'bg-exams', count: '89 files' },
        { id: 'gen', name: 'Generated Reports', icon: 'üìä', color: 'bg-gen', count: '12 files' }
    ];

    function initVault() {
        renderChips();
        renderSections();
    }

    function renderChips() {
        const chipContainer = document.getElementById('dynamic-chips');
        chipContainer.innerHTML = `<div class="chip active" onclick="filterType('all', this)">All Sections</div>`;

        institutionSections.forEach(sec => {
            chipContainer.innerHTML += `<div class="chip" onclick="filterType('${sec.id}', this)">${sec.name}</div>`;
        });
    }

    function renderSections(filterId = 'all') {
        const listContainer = document.getElementById('sections-list');
        listContainer.innerHTML = '';

        const data = filterId === 'all' ? institutionSections : institutionSections.filter(s => s.id === filterId);

        data.forEach(sec => {
            listContainer.innerHTML += `
                <div class="section-btn" onclick="navigateTo('${sec.id}', '${sec.name}')">
                    <div class="icon-box ${sec.color}">${sec.icon}</div>
                    <div class="btn-info">
                        <span class="btn-title">${sec.name}</span>
                        <span class="btn-count">${sec.count}</span>
                    </div>
                    <div class="chevron">‚ùØ</div>
                </div>
            `;
        });
    }

    function filterType(id, el) {
        document.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
        el.classList.add('active');
        renderSections(id);
    }

    function filterSections() {
        const query = document.getElementById('vault-search').value.toLowerCase();
        const btns = document.querySelectorAll('.section-btn');
        btns.forEach(btn => {
            const title = btn.querySelector('.btn-title').innerText.toLowerCase();
            btn.style.display = title.includes(query) ? 'flex' : 'none';
        });
    }

    function navigateTo(id, name) {
        const bar = document.getElementById('notification-bar');
        bar.innerText = `Accessing ${name}...`;
        bar.className = "bg-green";

        // Save last accessed to local storage for the "Recent" logic
        localStorage.setItem('last_vault_section', id);

        setTimeout(() => {
            // Capacitor-friendly navigation
            // We pass the ID so the next page knows what to fetch from the DB
            window.location.href = `view_docs.html?section=${id}`;
        }, 600);
    }

    // Load on start
    initVault();
</script>
</body>
</html>