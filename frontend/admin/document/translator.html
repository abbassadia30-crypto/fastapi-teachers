<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Doc Translator | Institution Console</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #3949ab;
      --secondary: #263238;
      --bg: #f0f4f8;
      --border: #d1d9e6;
      --success: #4caf50;
    }

    body { font-family: 'Poppins', sans-serif; margin: 0; background: var(--bg); display: flex; flex-direction: column; height: 100vh; }

    header { background: white; padding: 20px; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }

    #notification-bar {
      position: fixed; top: -100px; left: 50%; transform: translateX(-50%);
      width: 90%; max-width: 400px; padding: 15px; border-radius: 12px;
      color: white; text-align: center; transition: 0.4s; z-index: 2000; font-weight: 600;
    }
    .bg-red { background: #ef5350; top: 20px !important; }
    .bg-green { background: var(--success); top: 20px !important; }

    .main-container { flex: 1; overflow-y: auto; padding: 20px; padding-bottom: 120px; }

    /* File Upload Zone */
    .upload-card {
      background: white; border: 2px dashed var(--primary); border-radius: 20px;
      padding: 30px 20px; text-align: center; margin-bottom: 20px;
      cursor: pointer; transition: 0.3s;
    }
    .upload-card:active { background: #e8eaf6; }
    .file-info { font-size: 12px; color: #666; margin-top: 10px; display: none; }

    .config-card { background: white; border-radius: 20px; padding: 20px; margin-bottom: 20px; border: 1px solid var(--border); }
    label { font-size: 11px; font-weight: 700; color: var(--secondary); text-transform: uppercase; margin-bottom: 8px; display: block; }

    select, textarea {
      width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: 12px; font-family: inherit; font-size: 14px; box-sizing: border-box;
    }

    .lang-grid { display: grid; grid-template-columns: 1fr 40px 1fr; align-items: center; gap: 10px; margin-bottom: 20px; }

    .translation-workspace { display: flex; flex-direction: column; gap: 15px; }
    .box { background: white; border-radius: 15px; padding: 15px; border: 1px solid var(--border); position: relative; }
    .box-label { position: absolute; top: -10px; left: 15px; background: var(--primary); color: white; padding: 2px 10px; border-radius: 5px; font-size: 10px; font-weight: 700; }

    .publish-footer { position: fixed; bottom: 0; width: 100%; background: white; padding: 20px; border-top: 1px solid #eee; display: flex; gap: 10px; box-sizing: border-box; }
    .btn-fill { background: var(--primary); color: white; border: none; padding: 15px; border-radius: 15px; font-weight: 700; flex: 1; cursor: pointer; }

    .loading-spinner { display: none; width: 20px; height: 20px; border: 3px solid #f3f3f3; border-top: 3px solid var(--primary); border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 10px; }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
  </style>
</head>
<body>

<div id="notification-bar"></div>

<header>
  <div onclick="history.back()" style="font-size:24px; cursor:pointer;">âœ•</div>
  <h2 style="margin:0; font-size:16px; font-weight:800;">Smart Doc Translator</h2>
  <div style="width:24px;"></div>
</header>

<div class="main-container">
  <div class="upload-card" onclick="pickDocument()">
    <div class="loading-spinner" id="loader"></div>
    <div style="font-size: 30px;">ðŸ“„</div>
    <div style="font-weight: 700; color: var(--primary);">Upload PDF / DOCX</div>
    <div style="font-size: 10px; color: #888;">Select from Gallery or Files</div>
    <div class="file-info" id="file-name-display">File: <span>None</span></div>
  </div>

  <div class="config-card">
    <label>Translate Into</label>
    <div class="lang-grid">
      <select id="src-lang">
        <option value="en">Detect Language</option>
        <option value="en">English</option>
        <option value="ur">Urdu</option>
      </select>
      <div style="text-align: center;">âžœ</div>
      <select id="target-lang">
        <option value="ur">Urdu</option>
        <option value="en">English</option>
        <option value="ar">Arabic</option>
      </select>
    </div>

    <div class="translation-workspace">
      <div class="box">
        <span class="box-label">EXTRACTED CONTENT</span>
        <textarea id="source-text" rows="5" placeholder="Content will appear here after picking file..."></textarea>
      </div>

      <div class="box" style="background: #fcfcfc;">
        <span class="box-label">TRANSLATED RESULT</span>
        <textarea id="result-text" rows="5" readonly placeholder="Translated content..."></textarea>
      </div>
    </div>
  </div>
</div>

<div class="publish-footer">
  <button class="btn-fill" id="action-btn" onclick="processTranslation()">Start Translation</button>
</div>

<input type="file" id="fileInput" style="display:none" accept=".pdf,.doc,.docx,.txt" onchange="handleFileSelect(event)">

<script>
  function showNotify(msg, type) {
    const bar = document.getElementById('notification-bar');
    bar.innerText = msg;
    bar.className = type === 'error' ? 'bg-red' : 'bg-green';
    setTimeout(() => bar.className = "", 3000);
  }

  function pickDocument() {
    // Triggering the file input
    document.getElementById('fileInput').click();
  }

  function handleFileSelect(event) {
    const file = event.target.files[0];
    if (!file) return;

    document.getElementById('file-name-display').style.display = 'block';
    document.getElementById('file-name-display').querySelector('span').innerText = file.name;
    document.getElementById('loader').style.display = 'block';

    showNotify("Reading file content...", "green");

    // Real World Capacitor Logic:
    // Use a backend service or a worker to extract text from PDF/Doc
    setTimeout(() => {
      document.getElementById('loader').style.display = 'none';
      document.getElementById('source-text').value = "This is a sample text extracted from the " + file.name + " regarding institution policy.";
      showNotify("Content Extracted Successfully", "green");
    }, 2000);
  }

  async function processTranslation() {
    const text = document.getElementById('source-text').value;
    const target = document.getElementById('target-lang').value;

    if(!text) return showNotify("Please upload a file or enter text", "error");

    document.getElementById('action-btn').innerText = "Translating...";

    // Simulating AI translation logic
    setTimeout(() => {
      const mock = {
        'ur': "ÛŒÛ " + document.getElementById('file-name-display').querySelector('span').innerText + " Ø³Û’ Ù†Ú©Ø§Ù„Ø§ Ú¯ÛŒØ§ Ø§ÛŒÚ© Ù†Ù…ÙˆÙ†Û Ù…ØªÙ† ÛÛ’Û”",
        'en': "This is a sample text extracted from the document.",
        'ar': "Ù‡Ø°Ø§ Ù†Øµ Ù†Ù…ÙˆØ°Ø¬ÙŠ ØªÙ… Ø§Ø³ØªØ®Ø±Ø§Ø¬Ù‡ Ù…Ù† Ø§Ù„ÙˆØ«ÙŠÙ‚Ø©."
      };
      document.getElementById('result-text').value = mock[target] || "Translated Content...";
      document.getElementById('action-btn').innerText = "Save to DB & Documents";
      document.getElementById('action-btn').onclick = saveToDB;
      showNotify("Translation Complete", "green");
    }, 1500);
  }

  function saveToDB() {
    showNotify("Translated Document Saved to Institution Database", "green");
    setTimeout(() => location.reload(), 2000);
  }
</script>
</body>
</html>